{"ast":null,"code":"import { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport React from 'react';\nimport _ from 'lodash';\nimport { Link, withPrefix, getData, getPageUrl } from '../utils';\nimport BlogPostCategories from './BlogPostCategories';\nimport BlogPostMeta from '../components/BlogPostMeta';\nexport default class BlogFeedSection extends React.Component {\n  renderBlogFeedItemFilter(post, data, section) {\n    const sectionTitle = _.get(section, 'title');\n\n    const sectionAuthorRef = _.get(section, 'author');\n\n    const sectionCategoryRef = _.get(section, 'category');\n\n    if (sectionAuthorRef) {\n      const sectionAuthor = getData(data, sectionAuthorRef);\n\n      const postAuthorRef = _.get(post, 'author');\n\n      const postAuthor = getData(data, postAuthorRef);\n\n      if (postAuthor.id === sectionAuthor.id) {\n        return this.renderBlogFeedItem(post, data, sectionTitle);\n      }\n    } else if (sectionCategoryRef) {\n      const sectionCategory = getData(data, sectionCategoryRef);\n\n      const postCategoryRefs = _.get(post, 'categories');\n\n      const postCategories = _.map(postCategoryRefs, postCategoryRef => {\n        return getData(data, postCategoryRef);\n      });\n\n      const category = _.find(postCategories, {\n        id: sectionCategory.id\n      });\n\n      if (category) {\n        return this.renderBlogFeedItem(post, data, sectionTitle);\n      }\n    } else {\n      return this.renderBlogFeedItem(post, data, sectionTitle);\n    }\n\n    return null;\n  }\n\n  renderBlogFeedItem(post, data, sectionTitle) {\n    const postUrl = getPageUrl(post, {\n      withPrefix: true\n    });\n\n    const title = _.get(post, 'title');\n\n    const image = _.get(post, 'image');\n\n    const imageAlt = _.get(post, 'image_alt', '');\n\n    const categories = _.get(post, 'categories', []);\n\n    const excerpt = _.get(post, 'excerpt');\n\n    return /*#__PURE__*/_jsx(\"article\", {\n      className: \"cell\",\n      children: /*#__PURE__*/_jsxs(\"div\", {\n        className: \"card\",\n        children: [image && /*#__PURE__*/_jsx(Link, {\n          className: \"card__media card__media--top\",\n          href: postUrl,\n          children: /*#__PURE__*/_jsx(\"img\", {\n            src: withPrefix(image),\n            alt: imageAlt\n          })\n        }), /*#__PURE__*/_jsxs(\"div\", {\n          className: \"card__body\",\n          children: [/*#__PURE__*/_jsxs(\"header\", {\n            className: \"card__header\",\n            children: [/*#__PURE__*/_jsx(BlogPostCategories, {\n              categories: categories,\n              data: data,\n              containerClass: 'card__meta'\n            }), sectionTitle ? /*#__PURE__*/_jsx(\"h3\", {\n              className: \"h4 card__title\",\n              children: /*#__PURE__*/_jsx(Link, {\n                href: postUrl,\n                children: title\n              })\n            }) : /*#__PURE__*/_jsx(\"h2\", {\n              className: \"h4 card__title\",\n              children: /*#__PURE__*/_jsx(Link, {\n                href: postUrl,\n                children: title\n              })\n            })]\n          }), excerpt && /*#__PURE__*/_jsx(\"div\", {\n            className: \"card__copy\",\n            children: /*#__PURE__*/_jsx(\"p\", {\n              children: excerpt\n            })\n          }), /*#__PURE__*/_jsx(BlogPostMeta, {\n            post: post,\n            data: data,\n            containerClass: 'card__footer'\n          })]\n        })]\n      })\n    });\n  }\n\n  render() {\n    const data = _.get(this.props, 'data');\n\n    const section = _.get(this.props, 'section');\n\n    const title = _.get(section, 'title');\n\n    const showRecent = _.get(section, 'show_recent');\n\n    const recentCount = _.get(section, 'recent_count', 3);\n\n    let posts = _.orderBy(_.get(this.props, 'posts', []), 'date', 'desc');\n\n    if (showRecent) {\n      posts = posts.slice(0, recentCount);\n    }\n\n    return /*#__PURE__*/_jsxs(\"section\", {\n      className: \"section section--posts\",\n      children: [title && /*#__PURE__*/_jsx(\"div\", {\n        className: \"container container--md align-center\",\n        children: /*#__PURE__*/_jsx(\"h2\", {\n          className: \"section__title\",\n          children: title\n        })\n      }), /*#__PURE__*/_jsx(\"div\", {\n        className: \"container container--lg\",\n        children: /*#__PURE__*/_jsx(\"div\", {\n          className: \"flex flex--col-3\",\n          children: _.map(posts, (post, index) => {\n            return /*#__PURE__*/_jsx(React.Fragment, {\n              children: this.renderBlogFeedItemFilter(post, data, section)\n            }, index);\n          })\n        })\n      })]\n    });\n  }\n\n}","map":null,"metadata":{},"sourceType":"module"}